From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Tom <cryptite@gmail.com>
Date: Fri, 26 Feb 2021 16:10:53 -0600
Subject: [PATCH] Clear SyncLoadInfo

This patch merely adds the extra argument "clear" after /paper syncloadinfo to clear currently stored syncload info.

diff --git a/src/main/java/io/papermc/paper/PaperCommand.java b/src/main/java/io/papermc/paper/PaperCommand.java
index c09ef9a5de5465c15d5f352f4d2e90e699803d59..426237d168f00dd3426f8a4215dca89fba88aeb1 100644
--- a/src/main/java/io/papermc/paper/PaperCommand.java
+++ b/src/main/java/io/papermc/paper/PaperCommand.java
@@ -205,6 +205,13 @@ public class PaperCommand extends Command {
             sender.sendMessage(ChatColor.RED + "This command requires the server startup flag '-Dpaper.debug-sync-loads=true' to be set.");
             return;
         }
+
+        if (args.length > 1 && args[1].equals("clear")) {
+            SyncLoadFinder.clear();
+            sender.sendMessage(ChatColor.GRAY + "Sync load data cleared.");
+            return;
+        }
+
         File file = new File(new File(new File("."), "debug"),
             "sync-load-info" + DateTimeFormatter.ofPattern("yyyy-MM-dd_HH.mm.ss").format(LocalDateTime.now()) + ".txt");
         file.getParentFile().mkdirs();
diff --git a/src/main/java/io/papermc/paper/io/SyncLoadFinder.java b/src/main/java/io/papermc/paper/io/SyncLoadFinder.java
index 19255426a09839fb439dc795515d411c08e92692..9b3864d8dd21d7025dcfcf591c1ab228c0aa4898 100644
--- a/src/main/java/io/papermc/paper/io/SyncLoadFinder.java
+++ b/src/main/java/io/papermc/paper/io/SyncLoadFinder.java
@@ -26,6 +26,10 @@ public class SyncLoadFinder {
         public final Long2IntOpenHashMap coordinateTimes = new Long2IntOpenHashMap();
     }
 
+    public static void clear() {
+        SYNC_LOADS.clear();
+    }
+
     public static void logSyncLoad(final Level world, final int chunkX, final int chunkZ) {
         if (!ENABLED) {
             return;
